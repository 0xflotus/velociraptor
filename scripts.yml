env:
  TOP_ENV_VAR: test
allow:
  - read
v8flags:
  flaggone: ciaone
imap: ./import-map.json
scripts:

  # A simple alias
  start: deno run main.ts

  # A multiline alias
  multiline: >
    deno run very-long-command.ts
    --allow-net
    --allow-file

  # Run commands serially
  many:
    - deno run one.ts
    - deno run two.ts

  manywithoverrides:
    cmd: 
      - deno run one.ts
      - deno run two.ts
    env:
      PORT: 8000

  manywithoverridesobj:
    env:
      MODE: prod
    cmd: 
      - cmd: deno run one.ts
        allow:
          - write
        env:
          PORT: 8080
      - cmd: deno run two.ts
        env:
          PORT: 8001

  # Inline as well (quotes may be necessary)
  manyinline: [deno run one.ts, deno run two.ts]

  # Run commands in parallel
  par:
    - pll:
      - deno run one.ts
      - deno run two.ts

  # Run commands in parallel (inline)
  inlinepar:
    - pll: [deno run one.ts, deno run two.ts]

  # Run parallel + serial
  parser:
    - pll:
      - deno run one.ts
      - deno run two.ts
    - deno run three.ts

  crazy:
    - pll:
      - cmd:
          - deno run one.ts
          - deno run two.ts
        env:
          PROVOLA: true
      - deno run three.ts
    - deno run four.ts

  # Set environment variables
  start-dev:
    cmd: deno run file.ts
    env:
      MODE: development
      PORT: 8100

  # Grant permissions declaratively
  start-prod:
    cmd: deno run file.ts
    allow:
      - net
      - fs
